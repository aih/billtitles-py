:toc: auto

:imagesdir: ./docs/images

# Bill Title API

## Overview

This repository provides an http service to get bills, titles and bills related by title (using FastAPI); This API is used to retrieve, create, update, and delete bills and titles. It is built on the self-documenting FastAPI in Python.

## Usage 

* Install `git-lfs` to download the sqlite3 database that goes with this API. (https://git-lfs.github.com/).
* Clone this repository with `git clone https://github.com/aih/billtitles-py.git`
* Install Python > 3.7 (preferably with pyenv)
* Install dependencies, including FastAPI and the uvicorn server (pip install -r requirements.txt)
* Use Git lfs to download the billtitles.db file (~ 120MB) into the top level directory of the repository
* Run the server with `uvicorn billtitles.main:app --reload`

This will provide an API to query for bills and titles; query similar bills by bill number; (soon) to query similar bills by title; and to create, update, and delete bills and titles.

NOTE: The bill-to-bill data is currently incomplete. Some sample bills are shown below.

## API

The API is self-documenting, thanks to FastAPI. It can be viewed and tested at `http://localhost:8000/docs`.

image::api-docs.png[alt=View API documentation,width=640,height=480]

The api includes paths to get bills, titles, and bills related by title:

`/bills/related/{billnumber}`

image::bill-to-bill-query.png[alt=Get related bills, width=1040,height=280]

`/bills/{billnumber}`

image::bill-query.png[alt=Get bill by billnumber,width=1040,height=280]

`/titles/?title={title name}`

image::title-query.png[alt=Get title by name,width=1040,height=280]

`/titles/{title_id}`

image::title-id-query.png[alt=Get title by id,width=1040,height=280]

## TODO: provide a docker image to install and run the server

## See Also

See also the `github.com/aih/bills` and `github.com/aih/billtitles` repositories in Go.

The `github.com/aih/bills` repository provides a Go module to process bills that were downloaded using the unitedstates/congress scrapers. The `github.com/aih/billtitles` repository is another Go module that converts the json output from `bills` into sqlite3. It also provides a (crude) Go API to query for bills and titles.

## License

This repository is licensed under the [MIT license](LICENSE).
